(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{13:function(t,a,e){var o=e(54);"string"==typeof o&&(o=[[t.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};e(3)(o,r);o.locals&&(t.exports=o.locals)},14:function(t,a,e){var o=e(56);"string"==typeof o&&(o=[[t.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};e(3)(o,r);o.locals&&(t.exports=o.locals)},241:function(t,a,e){"use strict";e.r(a);var o={props:{model:{required:!0},height:{type:String,default:"300"}},mounted:function(){var t={height:this.height},a=this;t.callbacks={onInit:function(){$(a.$el).summernote("code",a.model),$(".dropdown-toggle").dropdown()},onChange:function(){a.$emit("update:model",$(a.$el).summernote("code"))}},$(this.$el).summernote(t)}},r=(e(53),e(1)),s={components:{htmlEditor:Object(r.a)(o,function(){var t=this.$createElement;return(this._self._c||t)("textarea",{staticClass:"form-control summernote",attrs:{id:"mySummer",required:""}})},[],!1,null,null,null).exports},data:function(){return{id:this.$route.params.id,idea:null,cats:{},permissions:{},user:window.user,baseUrl:window.baseUrl,form:new Form({id:"",title:"",description:"",editordata:"",img:"",category:"",language:"",author:"",privacy:""})}},computed:{puedoEditar:function(){if(0!=this.permissions.length){for(var t=!1,a=this.user.id,e=this.id,o={},r=this.permissions,s=0;s<r.length;s++)"can view-edit"==(o=r[s]).permission_type&&o.id_user==a&&o.id_idea==e&&(t=!0);return t}return!1}},methods:{onPickFile:function(){this.$refs.contactPhoto.click()},onFilePicked:function(t){var a=this,e=t.target.files;if(e[0].name.lastIndexOf(".")<=0)return alert("Please add a valid file");var o=new FileReader;o.addEventListener("load",function(){a.form.img=o.result}),o.readAsDataURL(e[0]),this.form.img=e[0]},loadIdea:function(){var t=this;axios.get("/getInnovation/"+this.id).then(function(a){t.form.title=a.data.idea.title,t.form.description=a.data.idea.description,t.form.img=a.data.idea.img,t.form.category=a.data.idea.category,t.form.language=a.data.idea.language,t.form.author=a.data.idea.author,t.form.privacy=a.data.idea.privacy,t.cats=a.data.cats,t.form.editordata=a.data.idea.body,t.permissions=a.data.permissions,$("#mySummer").summernote("code",a.data.idea.body)}).catch(function(t){console.log(t)})},createUser:function(){var t=this;this.$Progress.start(),this.form.post("/updateIdea/"+this.id).then(function(a){a.data;t.$router.go(-1),toastr.success("Awesome!","Idea updated successfully."),t.form.reset()}).catch(function(){toastr.error("Oops!","Something goes wrong")}),this.$Progress.finish()},updateRichText:function(){this.form.editordata=$('textarea[name="editordata"]').html($("#mySummer").code())}},mounted:function(){this.loadIdea();var t=function(){$("#mySummer").summernote({height:300}),$("#mySummer").summernote(),$(".dropdown-toggle").dropdown()};jQuery(document).ready(function(){t()})}},i=(e(55),Object(r.a)(s,function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[t.puedoEditar?e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg-12"},[e("div",{staticClass:"kt-portlet kt-portlet--last kt-portlet--head-lg kt-portlet--responsive-mobile myForm",attrs:{id:"kt_page_portlet"}},[e("form",{staticClass:"kt-form",attrs:{id:"kt_form"},on:{submit:function(a){return a.preventDefault(),t.createUser(a)},keydown:function(a){return t.form.onKeydown(a)}}},[e("div",{staticClass:"kt-portlet__head kt-portlet__head--lg"},[t._m(0),t._v(" "),e("div",{staticClass:"kt-portlet__head-toolbar"},[e("button",{staticClass:"btn btn-clean kt-margin-r-10",attrs:{type:"button"},on:{click:function(a){return t.$router.go(-1)}}},[e("i",{staticClass:"la la-arrow-left",staticStyle:{"padding-bottom":"8px"}}),t._v(" "),e("span",{staticClass:"kt-hidden-mobile"},[t._v("Atrás")])]),t._v(" "),e("div",{staticClass:"btn-group"},[e("button",{staticClass:"btn btn-brand",attrs:{type:"submit",disabled:t.form.busy}},[e("i",{staticClass:"la la-check",staticStyle:{"padding-bottom":"8px"}}),t._v(" "),e("span",{staticClass:"kt-hidden-mobile"},[t._v("Actualizar")])])])])]),t._v(" "),e("div",{staticClass:"kt-portlet__body blocked"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-xl-2"}),t._v(" "),e("div",{staticClass:"col-xl-8"},[e("div",{staticClass:"kt-section kt-section--first"},[e("div",{staticClass:"kt-section__body"},[e("h3",{staticClass:"kt-section__title kt-section__title-lg"},[t._v("Detalles de Idea")]),t._v(" "),e("div",{staticClass:"form-group row"},[e("label",{staticClass:"col-3 col-form-label"},[t._v("Título")]),t._v(" "),e("div",{staticClass:"col-9"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.title,expression:"form.title"}],staticClass:"form-control",attrs:{name:"title",type:"text",placeholder:"Short idea title...",required:""},domProps:{value:t.form.title},on:{input:function(a){a.target.composing||t.$set(t.form,"title",a.target.value)}}})])]),t._v(" "),e("br"),t._v(" "),e("div",{staticClass:"form-group form-group-last row"},[e("label",{staticClass:"col-3 col-form-label"},[t._v("Privacidad de la idea")]),t._v(" "),e("div",{staticClass:"col-9"},[e("div",{staticClass:"kt-checkbox-inline"},[e("label",{staticClass:"kt-checkbox"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.privacy,expression:"form.privacy"}],class:{"is-invalid":t.form.errors.has("privacy")},attrs:{type:"radio",value:"me",name:"privacy"},domProps:{checked:t._q(t.form.privacy,"me")},on:{change:function(a){return t.$set(t.form,"privacy","me")}}}),t._v(" Privada (Solo para mi)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t"),e("span")]),t._v(" "),e("label",{staticClass:"kt-checkbox"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.privacy,expression:"form.privacy"}],class:{"is-invalid":t.form.errors.has("privacy")},attrs:{type:"radio",value:"empresarial",name:"privacy"},domProps:{checked:t._q(t.form.privacy,"empresarial")},on:{change:function(a){return t.$set(t.form,"privacy","empresarial")}}}),t._v(" Privada (Empresarial)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t"),e("span")]),t._v(" "),e("label",{staticClass:"kt-checkbox"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.privacy,expression:"form.privacy"}],class:{"is-invalid":t.form.errors.has("privacy")},attrs:{type:"radio",value:"public",name:"privacy"},domProps:{checked:t._q(t.form.privacy,"public")},on:{change:function(a){return t.$set(t.form,"privacy","public")}}}),t._v(" Hacerla pública\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t"),e("span")]),t._v(" "),e("has-error",{attrs:{form:t.form,field:"privacy"}})],1)])]),t._v(" "),e("br"),t._v(" "),e("div",{staticClass:"form-group row"},[e("label",{staticClass:"col-3 col-form-label"},[t._v("Descripción corta")]),t._v(" "),e("div",{staticClass:"col-9"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.description,expression:"form.description"}],staticClass:"form-control",attrs:{name:"description",rows:"2",placeholder:"Short idea description...",required:""},domProps:{value:t.form.description},on:{input:function(a){a.target.composing||t.$set(t.form,"description",a.target.value)}}})])]),t._v(" "),e("div",{staticClass:"form-group row"},[e("label",{staticStyle:{"margin-left":"10px"},attrs:{for:""}},[t._v("Descripción completa")]),t._v(" "),e("div",{staticClass:"col-12"},[e("html-editor",{staticClass:"summernote richtext",attrs:{height:"300",model:t.form.editordata},on:{"update:model":function(a){return t.$set(t.form,"editordata",a)}}}),t._v(" "),e("span",{staticClass:"form-text text-muted"},[t._v("El módulo anterior hace que la idea se pueda escribir como un artículo profesional.")])],1)]),t._v(" "),e("div",{staticClass:"form-group row"},[e("label",{staticClass:"col-3 col-form-label"},[t._v("Imágen alusiva")]),t._v(" "),e("div",{staticClass:"col-9"},[e("div",{staticClass:"input-group"},[t._m(1),t._v(" "),e("input",{ref:"contactPhoto",staticClass:"form-control",attrs:{type:"file",accept:"image/x-png, image/jpeg",name:"img","aria-describedby":"basic-addon1"},on:{change:t.onFilePicked}})]),t._v(" "),e("span",{staticClass:"form-text text-muted"},[t._v("Escoge una imágen que represente la idea (<1MB)")])])]),t._v(" "),e("br"),t._v(" "),e("div",{staticClass:"form-group row"},[e("label",{staticClass:"col-3 col-form-label"},[t._v("Previsualización Imágen")]),t._v(" "),e("div",{staticClass:"col-9"},[e("v-img",{attrs:{src:t.form.img,height:"225"}})],1)]),t._v(" "),e("div",{staticClass:"form-group form-group-last row"},[e("label",{staticClass:"col-3 col-form-label"},[t._v("Categoría")]),t._v(" "),e("div",{staticClass:"col-9"},[e("div",{staticClass:"input-group"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.form.category,expression:"form.category"}],staticClass:"kt-selectpicker form-control ",class:{"is-invalid":t.form.errors.has("category")},attrs:{"data-container":"body",name:"category",id:"kt-selectpicker1",required:""},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.form,"category",a.target.multiple?e:e[0])}}},t._l(t.cats,function(a){return e("optgroup",{key:a.id,attrs:{label:a.label}},t._l(a.options,function(a){return e("option",{key:a.id,domProps:{value:a.id+a.name}},[t._v(t._s(t._f("toCategory")(a.name)))])}),0)}),0)])])])])]),t._v(" "),e("div",{staticClass:"kt-section"},[e("div",{staticClass:"kt-section__body"},[e("div",{staticClass:"form-group row"},[e("label",{staticClass:"col-3 col-form-label"},[t._v("Lenguaje")]),t._v(" "),e("div",{staticClass:"col-9"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.form.language,expression:"form.language"}],staticClass:"kt-selectpicker form-control",attrs:{name:"language",id:"kt-selectpicker2",required:""},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.form,"language",a.target.multiple?e:e[0])}}},[e("option",{attrs:{value:"en",selected:""}},[t._v("Inglés")]),t._v(" "),e("option",{attrs:{value:"es"}},[t._v("Español")])])])]),t._v(" "),e("div",{staticClass:"form-group form-group-last row"},[e("label",{staticClass:"col-3 col-form-label"},[t._v("Mostrar mi nombre en la idea?")]),t._v(" "),e("div",{staticClass:"col-9"},[e("div",{staticClass:"kt-checkbox-inline"},[e("label",{staticClass:"kt-checkbox"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.author,expression:"form.author"}],attrs:{type:"radio",value:"showme",checked:"true",name:"author"},domProps:{checked:t._q(t.form.author,"showme")},on:{change:function(a){return t.$set(t.form,"author","showme")}}}),t._v(" Si, mostrar.\n                              "),e("span")]),t._v(" "),e("label",{staticClass:"kt-checkbox"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.author,expression:"form.author"}],attrs:{type:"radio",value:"anonymous",name:"author"},domProps:{checked:t._q(t.form.author,"anonymous")},on:{change:function(a){return t.$set(t.form,"author","anonymous")}}}),t._v(" Colocar anónimo(a).\n                              "),e("span")])])])])])])])])]),t._v(" "),e("center",[e("div",{staticClass:"kt-portlet__head-toolbar"},[e("button",{staticClass:"btn btn-clean kt-margin-r-10",attrs:{type:"button"},on:{click:function(a){return t.$router.go(-1)}}},[e("i",{staticClass:"la la-arrow-left",staticStyle:{"padding-bottom":"8px"}}),t._v(" "),e("span",{staticClass:"kt-hidden-mobile"},[t._v("Atrás")])]),t._v(" "),e("div",{staticClass:"btn-group"},[e("button",{staticClass:"btn btn-brand",attrs:{type:"submit",disabled:t.form.busy}},[e("i",{staticClass:"la la-check",staticStyle:{"padding-bottom":"8px"}}),t._v(" "),e("span",{staticClass:"kt-hidden-mobile"},[t._v("Actualizar idea")])])])])]),t._v(" "),e("br")],1)])])]):e("div",{staticClass:"row"},[e("div",{staticClass:"col-4"}),t._v(" "),e("div",{staticClass:"col-4"},[e("router-link",{staticClass:"btn btn-primary",attrs:{to:"/innovations"}},[t._v("Ir a innovaciones")])],1),t._v(" "),e("div",{staticClass:"col-4"}),t._v(" "),e("div",{staticClass:"col-12 mt-5"},[e("center",[e("h4",{staticStyle:{"margin-left":"auto","margin-right":"auto",display:"block",color:"white"}},[t._v("Sorry, it seems you don't have permission to edit this idea.")])]),t._v(" "),e("img",{staticClass:"mt-5 fadeImg",staticStyle:{"text-align":"center","margin-left":"10%"},attrs:{height:"80%",width:"80%",src:t.baseUrl+"img/forbidden.svg",alt:""}})],1)])])},[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"kt-portlet__head-label"},[a("h3",{staticClass:"kt-portlet__head-title"},[this._v("\n                  Editando idea\n                  "),a("small",[this._v("...")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"input-group-prepend"},[a("span",{staticClass:"input-group-text"},[a("i",{staticClass:"flaticon-photo-camera"})])])}],!1,null,null,null));a.default=i.exports},53:function(t,a,e){"use strict";var o=e(13);e.n(o).a},54:function(t,a,e){(t.exports=e(2)(!1)).push([t.i,"\n.summernote {\r\n\tdisplay: fixed !important;\n}\r\n",""])},55:function(t,a,e){"use strict";var o=e(14);e.n(o).a},56:function(t,a,e){(t.exports=e(2)(!1)).push([t.i,"\n.note-toolbar {\r\n  z-index: auto;\n}\n.summernote {\r\n  display: fixed !important;\n}\n.blocked {\r\n  z-index: 999 !important;\n}\n.myForm {\r\n  background-color: #fafafa !important;\n}\n.dropdown-menu > li > a {\r\n           display: block;\r\n            padding: 3px 20px;\r\n            clear: both;\r\n            font-weight: normal;\r\n            line-height: 1.42857143;\r\n            color: #333;\r\n            white-space: nowrap;\n}\r\n",""])}}]);