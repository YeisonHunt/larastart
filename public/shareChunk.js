(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{24:function(t,e,i){var s=i(76);"string"==typeof s&&(s=[[t.i,s,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};i(3)(s,a);s.locals&&(t.exports=s.locals)},244:function(t,e,i){"use strict";i.r(e);var s={data:function(){return{selected:"first",options:[{text:"Watch",value:"first"},{text:"Watch & Edit",value:"second"}],id:this.$route.params.id,permissions:{},idea:{},user:window.user,othersPermissions:{},listPermissions:{pers:[]},baseUrl:window.baseUrl,newPer:new Form({user_id:window.user.id,idea_id:this.$route.params.id,email:"",permissions:"watch"}),ideaForm:new Form({user_id:window.user.id,idea_id:this.$route.params.id,privacy:""}),deletePermision:new Form({id_user:"",id_idea:this.$route.params.id}),updatePermision:new Form({id_user:"",id_idea:this.$route.params.id}),up:new Form({id:"",valor:"",email:""})}},computed:{listaPermisos:function(){var t=this;return this.othersPermissions.filter(function(e){return e.email!=t.user.email})},puedoCompartir:function(){return this.idea.created_by==this.user.id},mobile:function(){return"sm"==this.$mq},large:function(){return"md"==this.$mq||"lg"==this.$mq}},methods:{openModal:function(t){this.up.id=t.permissionId,this.up.valor=t.permission_type,this.up.email=t.email,$("#userCreationModal").modal("show")},updatePermissionPerId:function(){var t=this;this.$Progress.start(),this.up.post("/updatePermissionPerId").then(function(e){"User not registered on Asakaa."==e.data.msg?toastr.error("Oops!","User not registered on Asakaa yet."):(toastr.success("Keep sharing","Permission updated successfully!."),t.up.id="",t.up.valor="",$("#userCreationModal").modal("hide"),t.loadIdeaAndPermissions())}).catch(function(t){console.log(t),toastr.error("Oops!","Something goes wrong")}),this.$Progress.finish()},changePrivacyUser:function(t,e,i){"view"==i?$("#"+e+"view1").is(":checked")?(console.log("Puede ver"+t),this.updatePermissionPerId(t,"can view")):$("#"+e+"viewedit1").is(":checked")&&(console.log("puede editar"+t),this.updatePermissionPerId(t,"can view-edit")):$("#"+e+"view2").is(":checked")?(console.log("Puede ver2"+t),this.updatePermissionPerId(t,"can view")):$("#"+e+"viewedit2").is(":checked")&&(console.log("puede editar2"+t),this.updatePermissionPerId(t,"can view-edit"))},addUserPermission:function(){var t=this;this.$Progress.start(),this.newPer.post("/addUserPermission").then(function(e){"User not registered on Asakaa."==e.data.msg?toastr.error("Oops!","User not registered on Asakaa yet."):(toastr.success("Keep sharing","Permission added successfully!."),t.loadIdeaAndPermissions())}).catch(function(t){console.log(t),toastr.error("Oops!","Something goes wrong")}),this.$Progress.finish()},updateUserPermission:function(){this.$Progress.start(),this.newPer.post("/updateUserPermission").then(function(t){toastr.success("Keep sharing","Permission updated successfully!.")}).catch(function(t){console.log(t),toastr.error("Oops!","Something goes wrong")}),this.$Progress.finish()},loadIdeaAndPermissions:function(){var t=this;axios.get("/getInnovation/"+this.id).then(function(e){t.idea=e.data.idea,t.permissions=e.data.permissions,t.ideaForm.privacy=e.data.idea.privacy,t.othersPermissions=e.data.othersPermissions}).catch(function(t){console.log(t)})},changePrivacy:function(){var t=this;"public"==this.idea.privacy&&Swal.fire({title:"Are you sure?",text:"The idea will remain public forever.",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, I wanna share it with the world!"}).then(function(e){e.value?(t.ideaForm.privacy=t.idea.privacy,t.ideaForm.post("/updateIdeaPrivacy").then(function(e){e.data;toastr.success("Done!","The idea has been shared with humanity."),t.loadIdeaAndPermissions()}).catch(function(){toastr.error("Oops!","Something went wrong.")})):t.idea.privacy="me"})},deletePermissionsUser:function(t){var e=this;Swal.fire({title:"Are you sure?",text:"The ipermissions will be gone.",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, Delete permissions."}).then(function(i){i.value?(e.deletePermision.id_user=t,e.deletePermision.post("/deletePermissionsUser").then(function(t){t.data;toastr.success("Done!","Permissions deleted."),e.deletePermision.user_id="",e.loadIdeaAndPermissions()}).catch(function(){toastr.error("Oops!","Something went wrong.")})):e.idea.privacy="me"})}},mounted:function(){this.loadIdeaAndPermissions()}},a=(i(75),i(1)),r=Object(a.a)(s,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{"min-height":"80vh"}},[t.puedoCompartir?i("div",{class:{"container-fluid":t.mobile,container:t.large}},[i("div",{staticClass:"modal fade",attrs:{id:"userCreationModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[i("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[i("div",{staticClass:"modal-content"},[t._m(0),t._v(" "),i("div",{staticClass:"modal-body"},[i("form",{staticClass:"kt-form",on:{submit:function(e){return e.preventDefault(),t.updatePermissionPerId(e)},keydown:function(e){return t.up.onKeydown(e)}}},[i("div",{staticClass:"kt-portlet__body"},[t._m(1),t._v(" "),i("div",{staticClass:"form-group"},[i("label",[t._v("Email")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.up.email,expression:"up.email"}],staticClass:"form-control",class:{"is-invalid":t.up.errors.has("email")},attrs:{id:"priva",type:"text",name:"priva","aria-describedby":"email",disabled:""},domProps:{value:t.up.email},on:{input:function(e){e.target.composing||t.$set(t.up,"email",e.target.value)}}}),t._v(" "),i("has-error",{attrs:{form:t.up,field:"email"}})],1),t._v(" "),i("div",{staticClass:"form-group"},[i("div",{staticClass:"kt-radio-inline"},[i("label",{staticClass:"kt-radio"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.up.valor,expression:"up.valor"}],attrs:{type:"radio",value:"can view",name:"privacy"},domProps:{checked:"can view"==t.up.valor,checked:t._q(t.up.valor,"can view")},on:{change:[function(e){return t.$set(t.up,"valor","can view")},t.changePrivacy]}}),t._v(" Watch\n                      "),i("span")]),t._v(" "),i("label",{staticClass:"kt-radio"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.up.valor,expression:"up.valor"}],attrs:{type:"radio",value:"can view-edit",name:"privacy"},domProps:{checked:"can view"==t.up.valor,checked:t._q(t.up.valor,"can view-edit")},on:{change:[function(e){return t.$set(t.up,"valor","can view-edit")},t.changePrivacy]}}),t._v(" Watch & Edit\n                      "),i("span")])])])]),t._v(" "),i("div",{staticClass:"kt-portlet__foot float-right"},[i("div",{staticClass:"kt-form__actions"},[i("button",{staticClass:"btn btn-primary",attrs:{type:"submit",disabled:t.up.busy,id:"modalBtn"}},[t._v("Update Permissions")]),t._v(" "),i("button",{staticClass:"btn btn-secondary",attrs:{type:"reset","data-dismiss":"modal"}},[t._v("Cancel")])])])])])])])]),t._v(" "),i("div",{staticClass:"row"},[i("div",{staticClass:"col-lg-12 col-md-12 col-sm-12"},[i("div",{staticClass:"kt-portlet"},[i("div",{staticClass:"kt-portlet__head"},[i("div",{staticClass:"kt-portlet__head-label"},[i("button",{staticClass:"btn btn-light btn-elevate-hover btn-pill",on:{click:function(e){return t.$router.go(-1)}}},[i("i",{staticClass:"fa fa-arrow-left"}),t._v(" Go back\n              ")]),t._v("    \n              "),t._m(2)])]),t._v(" "),i("div",{staticClass:"kt-portlet__body"},[i("form",{staticClass:"kt-form"},[i("div",{staticClass:"form-group"},[i("label",[t._v("\n                  Idea title:\n                  "),i("b",[t._v(t._s(t.idea.title))])]),t._v(" "),i("br"),t._v("Current privacy\n                "),i("hr"),t._v(" "),i("div",{staticClass:"kt-radio-inline"},[i("label",{staticClass:"kt-radio",class:{"kt-radio--disabled":"public"==t.idea.privacy}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.idea.privacy,expression:"idea.privacy"}],attrs:{type:"radio",value:"me",name:"privacy",disabled:"public"==t.idea.privacy},domProps:{checked:t._q(t.idea.privacy,"me")},on:{change:[function(e){return t.$set(t.idea,"privacy","me")},t.changePrivacy]}}),t._v(" Just for me\n                    "),i("span")]),t._v(" "),i("label",{staticClass:"kt-radio kt-radio--bold kt-radio--brand"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.idea.privacy,expression:"idea.privacy"}],attrs:{type:"radio",value:"public",name:"privacy"},domProps:{checked:t._q(t.idea.privacy,"public")},on:{change:[function(e){return t.$set(t.idea,"privacy","public")},t.changePrivacy]}}),t._v(" Public\n                    "),i("span")])]),t._v(" "),t._m(3)])]),t._v(" "),i("form",{staticClass:"kt-form",on:{submit:function(e){return e.preventDefault(),t.addUserPermission()},keydown:function(e){return t.newPer.onKeydown(e)}}},[t._m(4),t._v(" "),i("div",{staticClass:"row"},[i("div",{staticClass:"col-lg-5 col-md-5 col-sm-12"},[i("div",{staticClass:"form-group"},[i("label",[t._v("e-mail")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.newPer.email,expression:"newPer.email"}],staticClass:"form-control",attrs:{type:"email","aria-describedby":"emailHelp",placeholder:"collaborator@mail.com",required:""},domProps:{value:t.newPer.email},on:{input:function(e){e.target.composing||t.$set(t.newPer,"email",e.target.value)}}})])]),t._v(" "),i("div",{staticClass:"col-lg-5 col-md-5 col-sm-12"},[i("div",{staticClass:"form-group"},[i("label",[t._v("Permissions")]),t._v(" "),i("div",{staticClass:"kt-radio-inline mt-2"},[i("label",{staticClass:"kt-radio"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.newPer.permissions,expression:"newPer.permissions"}],attrs:{type:"radio",name:"privacy",value:"watch"},domProps:{checked:t._q(t.newPer.permissions,"watch")},on:{change:function(e){return t.$set(t.newPer,"permissions","watch")}}}),t._v(" Watch\n                        "),i("span")]),t._v(" "),i("label",{staticClass:"kt-radio"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.newPer.permissions,expression:"newPer.permissions"}],attrs:{type:"radio",name:"privacy",value:"watch-edit"},domProps:{checked:t._q(t.newPer.permissions,"watch-edit")},on:{change:function(e){return t.$set(t.newPer,"permissions","watch-edit")}}}),t._v(" Watch & Edit\n                        "),i("span")])])])]),t._v(" "),t._m(5)])]),t._v(" "),i("hr"),t._v(" "),t.othersPermissions.length>0?i("table",{staticClass:"table table-hover table-dark",staticStyle:{"table-layout":"fixed"}},[t._m(6),t._v(" "),i("tbody",t._l(t.listaPermisos,function(e,s){return i("tr",{key:t.othersPermissions.id},[i("td",[t._v(t._s(e.email))]),t._v(" "),i("td",["can view"==e.permission_type?i("div",{staticClass:"kt-radio-inline mt-2"},[t._m(7,!0),t._v(" "),t._m(8,!0)]):i("div",{staticClass:"kt-radio-inline mt-2"},[i("label",{staticClass:"kt-radio kt-radio--disabled"},[i("input",{attrs:{type:"radio",disabled:"",name:"privi"+e.id}}),t._v(" Watch\n                        "),i("span")]),t._v(" "),i("label",{staticClass:"kt-radio kt-radio--disabled"},[i("input",{attrs:{type:"radio",checked:"",disabled:"",name:"privi"+e.id}}),t._v(" Watch & Edit\n                        "),i("span")])])]),t._v(" "),i("td",[i("a",{attrs:{href:"javascript:void(0);"},on:{click:function(i){return t.openModal(e)}}},[t._m(9,!0)]),t._v(" "),i("a",{attrs:{href:"javascript:void(0);"},on:{click:function(i){return t.deletePermissionsUser(e.id)}}},[t._m(10,!0)])])])}),0)]):t._e()])])]),t._v(" "),i("div",{staticClass:"col-lg-6 col-md-6 col-sm-12"})]),t._v(" "),i("div",{staticClass:"row"})]):i("div",{staticClass:"row"},[i("div",{staticClass:"col-4"}),t._v(" "),i("div",{staticClass:"col-4"},[i("router-link",{staticClass:"btn btn-primary",attrs:{to:"/innovations"}},[t._v("Go back to innovations")])],1),t._v(" "),i("div",{staticClass:"col-4"}),t._v(" "),i("div",{staticClass:"col-12 mt-5"},[i("center",[i("h4",{staticStyle:{"margin-left":"auto","margin-right":"auto",display:"block",color:"white"}},[t._v("Sorry, it seems you don't have permission to edit this idea.")])]),t._v(" "),i("img",{staticClass:"mt-5 fadeImg",staticStyle:{"text-align":"center","margin-left":"10%"},attrs:{height:"80%",width:"80%",src:t.baseUrl+"img/forbidden.svg",alt:""}})],1)])])},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title",attrs:{id:"modalTitle"}},[this._v("Editing user permissions!")]),this._v(" "),e("button",{staticClass:"close",attrs:{type:"button",id:"closeBtnModal","data-dismiss":"modal","aria-label":"Close"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"form-group form-group-last"},[e("div",{staticClass:"alert alert-secondary",attrs:{role:"alert"}},[e("div",{staticClass:"alert-icon"},[e("i",{staticClass:"flaticon-share kt-font-brand",attrs:{id:"iconBrand"}})]),this._v(" "),e("div",{staticClass:"alert-text",attrs:{id:"modalSubtitle"}},[this._v("Share an idea could help her becomes a reality.")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{staticClass:"kt-portlet__head-title"},[this._v("\n                Innovation Privacy\n                "),e("br")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"form-text text-muted"},[this._v("\n                  Sharing is the first step in making an idea come true.\n                  "),e("br"),this._v("Note: Make an idea public isn't reversible.\n                ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"form-group"},[e("label",[this._v("Collaborators")]),this._v(" "),e("span",{staticClass:"form-text text-muted"},[this._v("Adding people helps to validate your idea.")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col-lg-2 col-md-2 col-sm-12"},[e("button",{staticClass:"mdl-button mdl-js-button mdl-button--fab mt-3 mdl-js-ripple-effect",staticStyle:{"padding-top":"20px"},attrs:{type:"submit"}},[e("i",{staticClass:"material-icons"},[this._v("add")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",{attrs:{scope:"col"}},[this._v("E-mail")]),this._v(" "),e("th",{attrs:{scope:"col"}},[this._v("Permissions")]),this._v(" "),e("th",{attrs:{scope:"col"}},[this._v("Actions")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"kt-radio kt-radio--disabled"},[e("input",{attrs:{type:"radio",checked:"",disabled:"",name:"privi"}}),this._v(" Watch\n                        "),e("span")])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"kt-radio kt-radio--disabled"},[e("input",{attrs:{type:"radio",disabled:"",name:"privi"}}),this._v(" Watch & Edit\n                        "),e("span")])},function(){var t=this.$createElement,e=this._self._c||t;return e("i",{staticClass:"flaticon2-settings bigIcons hoverWhite"},[e("span")])},function(){var t=this.$createElement,e=this._self._c||t;return e("i",{staticClass:"flaticon-delete bigIcons hoverWhite"},[e("span")])}],!1,null,null,null);e.default=r.exports},75:function(t,e,i){"use strict";var s=i(24);i.n(s).a},76:function(t,e,i){(t.exports=i(2)(!1)).push([t.i,"\n.whiteHover:hover {\r\n  color: white;\r\n  box-shadow: 15px 15px 15px 15px #fff;\r\n  border: 1px solid white !important;\n}\r\n",""])}}]);