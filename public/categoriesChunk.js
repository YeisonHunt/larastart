(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{243:function(t,e,a){"use strict";a.r(e);function o(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var s={data:function(){var t,e;return{form:new Form({name:"",id:""}),modalTitle:"Nueva categoría",btnTitle:"Guardar",focus:!0,dialog:!1,headers:[{text:"#",align:"left",sortable:!0,value:"id"},{text:"Nombre",value:"name",sortable:!0},{text:"Acciones",value:"name",sortable:!1}],desserts:[],categories:[],editedIndex:-1,editedItem:(t={name:""},o(t,"name",0),o(t,"fat",0),o(t,"carbs",0),o(t,"protein",0),t),defaultItem:(e={name:""},o(e,"name",0),o(e,"fat",0),o(e,"carbs",0),o(e,"protein",0),e)}},computed:{formTitle:function(){return-1===this.editedIndex?"New Item":"Edit Item"}},methods:{showCategoryModal:function(){$("#categoryModal").modal("show"),this.btnTitle="Guardar",this.modalTitle="Nueva categoría"},initialize:function(){},editItem:function(t){$("#categoryModal").modal("show"),this.modalTitle="Editando categoría",this.btnTitle="Actualizar",this.form.name=t.name,this.form.id=t.id},deleteItem:function(t){var e=this;Swal.fire({title:"Estás seguro(a)?",text:"No se puede deshacer esta acción.",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, borrar categoría."}).then(function(a){a.value&&(e.form.id=t.id,e.form.post("/deleteCategory/"+t.id).then(function(t){toastr.success("Listo","Categoría borrada."),e.categories=t.data.categories}).catch(function(){toastr.error("Oops!","Something went wrong.")}))})},close:function(){$("#categoryModal").modal("hide")},save:function(){var t=this;this.$Progress.start(),this.form.name=this.form.name.charAt(0).toUpperCase()+this.form.name.slice(1),this.form.post("/saveCategory").then(function(e){$("#closeBtnModal").click(),$(".modal-backdrop").remove(),toastr.success("Genial","Nueva categoría creada."),t.categories=e.data.categories,t.form.name="",$("#categoryModal").modal("hide")}).catch(function(){toastr.error("Oops!","Something goes wrong")}),this.$Progress.finish()},loadCategories:function(){var t=this;this.$Progress.start(),this.form.post("/getCategories").then(function(e){t.categories=e.data.categories}).catch(function(t){console.log(t)}),this.$Progress.finish()}},mounted:function(){this.loadCategories(),console.log("asdasdadsdas")}},r=a(1),i=Object(r.a)(s,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{"min-height":"80vh"}},[a("div",{staticClass:"modal fade",attrs:{id:"categoryModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v(t._s(t.modalTitle))]),t._v(" "),t._m(0)]),t._v(" "),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("v-card",[a("form",{on:{submit:function(e){return e.preventDefault(),t.save(e)},keydown:function(e){return t.form.onKeydown(e)}}},[a("v-card-text",[a("v-text-field",{attrs:{counter:"",maxlength:"20",title:"4 carácteres mínimo",pattern:".{4,}",id:"categoryInput",label:"Nombre de categoría",required:""},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:t.close}},[t._v("Cancelar")]),t._v(" "),a("v-btn",{attrs:{color:"blue darken-1",dark:"",type:"submit",disabled:t.form.busy}},[t._v(t._s(t.btnTitle))])],1)],1)])],1)])])])])])]),t._v(" "),a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[t._v("Categorías Personalizadas")]),t._v(" "),a("v-spacer"),t._v(" "),a("v-btn",{staticClass:"mb-2",attrs:{color:"orange darken-1",dark:""},on:{click:t.showCategoryModal}},[t._v("Nueva categoría")])],1),t._v(" "),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.categories},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",[t._v(t._s(e.item.id))]),t._v(" "),a("td",{staticClass:"text-xs-left"},[t._v(t._s(e.item.name))]),t._v(" "),a("td",{staticClass:"text-xs-left"},[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return t.editItem(e.item)}}},[t._v("\n        edit\n      ")]),t._v(" "),a("v-icon",{attrs:{small:""},on:{click:function(a){return t.deleteItem(e.item)}}},[t._v("\n        delete\n      ")])],1)]}},{key:"no-data",fn:function(){return[a("v-btn",{attrs:{color:"primary"},on:{click:t.initialize}},[t._v("Reset")])]},proxy:!0}])})],1)},[function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])}],!1,null,null,null);e.default=i.exports}}]);